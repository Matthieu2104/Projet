<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Fréquentation</title>
    <style>
        .container {
            width: 80%;
            margin: 0 auto;
            text-align: center;
        }
        canvas {
            margin-top: 20px;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        function loadFrequentation() {
            fetch('frequ.php')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok ' + response.statusText);
                    }
                    return response.json();
                })
                .then(data => {
                    if (data.error) {
                        console.error('Erreur:', data.error);
                        return;
                    }

                    const jours = ['Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi', 'Dimanche'];
                    const timeSlots = ["8h30-10h30", "10h30-12h30", "12h30-14h00", "14h00-16h00", "16h00-18h00", "18h00-23h00"];

                    const datasets = timeSlots.map((slot, slotIndex) => {
                        return {
                            label: slot,
                            data: jours.map(jour => data[jour][slotIndex] || 0),
                            backgroundColor: `rgba(${slotIndex * 40}, 99, 132, 0.2)`,
                            borderColor: `rgba(${slotIndex * 40}, 99, 132, 1)`,
                            borderWidth: 1
                        };
                    });

                    const ctx = document.getElementById('frequentationChart').getContext('2d');
                    new Chart(ctx, {
                        type: 'bar',
                        data: {
                            labels: jours,
                            datasets: datasets
                        },
                        options: {
                            scales: {
                                y: {
                                    beginAtZero: true
                                }
                            }
                        }
                    });
                })
                .catch(error => console.error('Erreur:', error));
        }

        document.addEventListener('DOMContentLoaded', loadFrequentation);
    </script>
</head>
<body>
<div class="container">
    <h1>Fréquentation</h1>
    <canvas id="frequentationChart"></canvas>
</div>
</body>
</html>
